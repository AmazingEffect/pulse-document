<mxfile host="Electron" modified="2024-10-12T07:33:18.131Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.1 Chrome/112.0.5615.204 Electron/24.6.1 Safari/537.36" etag="qSN2brfsmY-KIfv6avvz" version="21.6.1" type="device" pages="3">
  <diagram name="메인" id="05k3A8qEgXLGpjVdd8z4">
    <mxGraphModel dx="2225" dy="854" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="1">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-24" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-540" y="510" width="1230" height="720" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-11" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-350" y="90" width="630" height="380" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-1" value="Member&lt;br&gt;&lt;br&gt;회원 서비스" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-320" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-2" value="Social Graph&lt;br&gt;&lt;br&gt;소셜 그래프 서비스" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-170" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-3" value="Content&lt;br&gt;&lt;br&gt;콘텐츠 서비스" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-26" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-4" value="Notification&lt;br&gt;&lt;br&gt;알림 서비스" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="130" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-5" value="Media&lt;br&gt;&lt;br&gt;미디어 서비스" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-320" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-6" value="Messaging&lt;br&gt;&lt;br&gt;메시징 서비스" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-170" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-7" value="Search&lt;br&gt;&lt;br&gt;검색 서비스" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-26" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-8" value="Analytics&lt;br&gt;&lt;br&gt;분석 서비스" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="130" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-9" value="Recommandation&lt;br&gt;&lt;br&gt;추천 서비스" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-320" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-10" value="공통 모듈 Library 추출&lt;br&gt;Spring event 발행, Kafka 메시지&lt;br&gt;&lt;br&gt;그리고 이 라이브러리를 각 서버에서 gradle로 import 하여 사용" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-513" y="1020" width="190" height="180" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-12" value="member&lt;br&gt;(진안, 현하)&lt;br&gt;&lt;br&gt;회원 가입/탈퇴&lt;br&gt;로그인/ 로그아웃&lt;br&gt;프로필 관리 (이름, 사진 소개 등)&lt;br&gt;비밀번호 변경 및 복구&lt;br&gt;인증 및 권한 관리 (Oauth2, Jwt)&lt;br&gt;- 소셜 로그인 구현&lt;br&gt;사용자 차단 기능&lt;br&gt;회원 활동 로그" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-512" y="570" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-13" value="content&lt;br&gt;(진안 70%, 수현 30%)&lt;br&gt;&lt;br&gt;게시물 작성, 수정, 삭제&lt;br&gt;게시물 조회&lt;br&gt;게시글 신고&lt;br&gt;댓글 조회,&amp;nbsp;작성, 수정, 삭제, 신고&lt;br&gt;태그 및 카테고리 관리&lt;br&gt;&lt;br&gt;게시글 공유&lt;br&gt;콘텐츠(게시글, 댓글) 필터링 기능 (팔로워, 관심사, 태그, 위치 기반)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-260" y="570" width="200" height="190" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-14" value="social graph&lt;br&gt;(수현 70%, 다빈 30%)&lt;br&gt;&lt;br&gt;친구 조회,&amp;nbsp;추가/삭제, 추천&lt;br&gt;팔로우/언팔로우, 목록 조회&lt;br&gt;사용자 그룹 생성/그룹 내 게시글 공유&lt;br&gt;친구 관계 설정 (친한 친구/지인 등 분류)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="220" y="572.5" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-15" value="notification&lt;br&gt;(수현, 다빈)&lt;br&gt;&lt;br&gt;알림 생성(새 개시물, 댓글, 친구 요청 등)&lt;br&gt;알림 조회 및 관리&lt;br&gt;실시간 알림 전송(앱 내 알림, 외부 푸시 알림, 이메일 등)&lt;br&gt;알림 맞춤 설정 (사용자가 원하는 대로)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="-520" y="790" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-16" value="media&lt;br&gt;(다빈 70%, 진안 30%)&lt;br&gt;&lt;br&gt;이미지 및 비디오 업로드&lt;br&gt;미디어 편집 (자르기, 필터 적용 등)&lt;br&gt;사용자 개인 미디어 파일 저장 및 관리&lt;br&gt;실시간 스트리밍 기능 제공" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-16" y="572.5" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-17" value="messaging&lt;br&gt;(다빈, 현하)&lt;br&gt;&lt;br&gt;사용자 간 개인 메시지 전송&lt;br&gt;메시지 암호화&lt;br&gt;메시지를 읽었는지 확인하는 기능&lt;br&gt;메시지로 파일/동영상/이미지 전송 기능&lt;br&gt;그룹 채팅" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="-260" y="790" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-18" value="search&lt;br&gt;&lt;br&gt;사용자, 게시물, 댓글 등 검색&lt;br&gt;실시간 검색어 추천&lt;br&gt;고급 검색 (필터링, 정렬 등)&lt;br&gt;검색어 입력시 자동으로 관련 검색어 추천&lt;br&gt;사용자의 검색 기록 저장 및 조회(히스토리)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="-16" y="790" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-19" value="analytics&lt;br&gt;&lt;br&gt;사용자 활동 분석&lt;br&gt;게시물 및 댓글의 반응 분석&lt;br&gt;트래픽 분석&lt;br&gt;사용자 행동 패턴 분석&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="220" y="790" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-20" value="recommandation&lt;br&gt;(수현: 나중에)&lt;br&gt;&lt;br&gt;사용자 맞춤형 콘텐츠 추천&lt;br&gt;친구 추천&lt;br&gt;관심사 기반 추천&lt;br&gt;다양한 추천 알고리즘&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;추천 피드백" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="460" y="790" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-22" value="event-lib&lt;br&gt;공통 모듈&lt;br&gt;라이브러리" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-170" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-23" value="Pulse MSA 서버 구성도" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-332.5" y="100" width="145" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-25" value="Pulse MSA 서버 구현할 내용" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-513" y="520" width="145" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EDXE8RHx-zJdLqeyHTM2-26" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;pulse-member&lt;/strong&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;: 회원 서비스&lt;/span&gt;&lt;/div&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;pulse-content&lt;/strong&gt;&lt;span style=&quot;background-color: initial; font-weight: normal;&quot;&gt;: 콘텐츠 서비스&lt;/span&gt;&lt;/div&gt;&lt;/strong&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;pulse-social-graph&lt;/strong&gt;&lt;span style=&quot;background-color: initial; font-weight: normal;&quot;&gt;: 소셜 그래프 서비스&lt;/span&gt;&lt;/div&gt;&lt;/strong&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;pulse-notification&lt;/strong&gt;&lt;span style=&quot;background-color: initial; font-weight: normal;&quot;&gt;: 알림 서비스&lt;/span&gt;&lt;/div&gt;&lt;/strong&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;pulse-media&lt;/strong&gt;&lt;span style=&quot;background-color: initial; font-weight: normal;&quot;&gt;: 미디어 서비스&lt;/span&gt;&lt;/div&gt;&lt;/strong&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;pulse-messaging&lt;/strong&gt;&lt;span style=&quot;background-color: initial; font-weight: normal;&quot;&gt;: 메시징 서비스&lt;/span&gt;&lt;/div&gt;&lt;/strong&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;pulse-search&lt;/strong&gt;&lt;span style=&quot;background-color: initial; font-weight: normal;&quot;&gt;: 검색 서비스&lt;/span&gt;&lt;/div&gt;&lt;/strong&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;pulse-analytics&lt;/strong&gt;&lt;span style=&quot;background-color: initial; font-weight: normal;&quot;&gt;: 분석 서비스&lt;/span&gt;&lt;/div&gt;&lt;/strong&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;font-weight: bold; text-align: left;&quot;&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;pulse-recommendation&lt;/strong&gt;&lt;span style=&quot;background-color: initial; font-weight: normal;&quot;&gt;: 추천 서비스&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;pulse-event-lib&lt;/b&gt;: 이벤트 관련 공통 로직 라이브러리&lt;/div&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;fillColor=default;strokeColor=default;" parent="1" vertex="1">
          <mxGeometry x="-630" y="220" width="262" height="160" as="geometry" />
        </mxCell>
        <mxCell id="x6-yN1iA4uWycwHVmHdx-1" value="Gateway&lt;br&gt;&lt;br&gt;게이트웨이 서비스" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-26" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="x6-yN1iA4uWycwHVmHdx-2" value="Batch&lt;br&gt;&lt;br&gt;배치 서비스" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="130" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="x6-yN1iA4uWycwHVmHdx-3" value="gateway&lt;br&gt;&lt;br&gt;API gateway 구현은 고민중인 사항. 꼭 필요한것은 아니지만 여기서 공통적으로 권한을 통한 인증, 인가 작업이 가능해서 고려중이다." style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-260" y="1020" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="x6-yN1iA4uWycwHVmHdx-4" value="batch&lt;br&gt;(현하)&lt;br&gt;&lt;br&gt;이벤트 재발행,&lt;br&gt;데이터 쌓기" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-16" y="1020" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="6HxcSBrgFgTNWX1CVm6c-9" value="소셜 모임 (2차 개발로 변경)&lt;br&gt;(현하 50%)&lt;br&gt;&lt;br&gt;모임 (추가)&lt;br&gt;모임 게시판 (추가)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="460" y="572.5" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="6HxcSBrgFgTNWX1CVm6c-10" value="front&lt;br&gt;&lt;br&gt;현하 50%&lt;br&gt;TBD (디자이너 1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" parent="1" vertex="1">
          <mxGeometry x="220" y="1017.5" width="200" height="185" as="geometry" />
        </mxCell>
        <mxCell id="DdJRaz7nMTnWeJZ1OOsi-1" value="로그&lt;br&gt;&lt;br&gt;로그백 설정 (라이브러리 찾아보기)&lt;br&gt;엘라스틱 elk (운영 환경 고려)&lt;br&gt;&lt;br&gt;웹플럭스 (비동기 고려)&lt;br&gt;테스트도구 : 소나큐브, 자코코&lt;br&gt;미디어 압축 라이브러리 &lt;br&gt;(클라우드 스토리지 선정, 미디어 저장 테스트 라이브러리 사용)&lt;br&gt;미디어 저장 시나리오&lt;br&gt;실시간 스트리밍&lt;br&gt;카프카 스트림즈&lt;br&gt;&lt;br&gt;erd 설계시 연관관계 어떻게 할지 정하기&lt;br&gt;이벤트 어떻게 사용할지 (EDA)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" parent="1" vertex="1">
          <mxGeometry x="380" y="177.5" width="270" height="262.5" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="DTD2gT_CyKH6uSGbGwb9" name="미디어">
    <mxGraphModel dx="2225" dy="-315" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="mzORLCVznDUJBH9im8Ds-32" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-337.5" y="1510" width="997.5" height="630" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="-122" y="1540" width="659" height="220" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="-122" y="1860" width="769" height="262" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Wx69Amhbbnl48co7pUgd-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-247.5" y="1785" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-5" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="-320" y="1755" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Wx69Amhbbnl48co7pUgd-8" target="Wx69Amhbbnl48co7pUgd-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Wx69Amhbbnl48co7pUgd-8" target="Wx69Amhbbnl48co7pUgd-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-8" value="" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shadow=0;dashed=0;strokeWidth=1;shape=mxgraph.android.phone2;strokeColor=#c0c0c0;" parent="1" vertex="1">
          <mxGeometry x="-242" y="1730" width="60" height="110" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Wx69Amhbbnl48co7pUgd-10" target="Wx69Amhbbnl48co7pUgd-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-10" value="게시글 내용&lt;br&gt;- 제목, 내용 등등" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-88" y="1600" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Wx69Amhbbnl48co7pUgd-14" target="Wx69Amhbbnl48co7pUgd-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.391;entryY=1.008;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Wx69Amhbbnl48co7pUgd-14" target="Wx69Amhbbnl48co7pUgd-51" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-13" y="1800" />
              <mxPoint x="295" y="1800" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-13" value="exception" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="Wx69Amhbbnl48co7pUgd-12" vertex="1" connectable="0">
          <mxGeometry x="-0.2205" y="2" relative="1" as="geometry">
            <mxPoint x="38" y="2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-14" value="파일 저장 api 호출&lt;br&gt;(비동기 저장)&lt;br&gt;- 이미지&lt;br&gt;- 동영상" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="-88" y="1907" width="116" height="75" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-15" value="게시글 입력" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-252" y="1700" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" source="Wx69Amhbbnl48co7pUgd-17" target="Wx69Amhbbnl48co7pUgd-21" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="124" y="2062" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-17" value="Amazon S3" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#232F3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.s3;" parent="1" vertex="1">
          <mxGeometry x="94" y="1906" width="60" height="78" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Wx69Amhbbnl48co7pUgd-21" target="Wx69Amhbbnl48co7pUgd-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Wx69Amhbbnl48co7pUgd-21" target="Wx69Amhbbnl48co7pUgd-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-21" value="저장되면 파일&amp;nbsp;&lt;br&gt;metadata&amp;nbsp; callback받기&lt;br&gt;(kafka 사용해서 메시지 발행 : 콘텐츠 서버에 metadata 전달)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="78" y="2032" width="150" height="67" as="geometry" />
        </mxCell>
        <mxCell id="Jwey1jkozNtah0jZmmYM-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="Wx69Amhbbnl48co7pUgd-22" target="Jwey1jkozNtah0jZmmYM-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-22" value="파일 서버 db에 저장" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="263" y="2035.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-23" value="콘텐츠 서버" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-102" y="1550" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Wx69Amhbbnl48co7pUgd-24" target="mzORLCVznDUJBH9im8Ds-34" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="680" y="1815" />
              <mxPoint x="680" y="2210" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-24" value="Kafka" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;fillColor=#f8cecc;strokeColor=#b85450;size=0;" parent="1" vertex="1">
          <mxGeometry x="388" y="1790" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-25" value="콘텐츠 서버 게시글" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-613" y="1372.5" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-26" value="post_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-25" vertex="1">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-27" value="content" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-25" vertex="1">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-28" value="file_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-25" vertex="1">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-29" value="미디어 서버: 파일" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-773" y="1837.5" width="173" height="360" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-30" value="file_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-29" vertex="1">
          <mxGeometry y="30" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-6" value="origin_name" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-29" vertex="1">
          <mxGeometry y="60" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-7" value="member_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-29" vertex="1">
          <mxGeometry y="90" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-8" value="path" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-29" vertex="1">
          <mxGeometry y="120" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-9" value="status (UPLOADING, SUCCESS, FAILURE)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-29" vertex="1">
          <mxGeometry y="150" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-10" value="size" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-29" vertex="1">
          <mxGeometry y="180" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-14" value="width" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-29" vertex="1">
          <mxGeometry y="210" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-16" value="height" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-29" vertex="1">
          <mxGeometry y="240" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-11" value="content-type" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-29" vertex="1">
          <mxGeometry y="270" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-12" value="is_compressed (true, false)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-29" vertex="1">
          <mxGeometry y="300" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-13" value="registration_time" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-29" vertex="1">
          <mxGeometry y="330" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-35" value="묶음 파일&lt;br&gt;&lt;br&gt;단건의 파일" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-88" y="2012" width="104" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-36" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="151" y="2180" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Wx69Amhbbnl48co7pUgd-38" target="Wx69Amhbbnl48co7pUgd-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-38" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="151" y="2210" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-39" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="161" y="2310" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-40" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="181" y="2310" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-41" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="333" y="2180" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-42" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="333" y="2210" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-43" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="343" y="2310" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-44" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="363" y="2310" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-45" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="393" y="2310" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Wx69Amhbbnl48co7pUgd-47" target="Wx69Amhbbnl48co7pUgd-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-47" value="작성하기" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="78" y="1600" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Wx69Amhbbnl48co7pUgd-51" target="Wx69Amhbbnl48co7pUgd-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Wx69Amhbbnl48co7pUgd-51" target="Wx69Amhbbnl48co7pUgd-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="280" y="1780" />
              <mxPoint x="-30" y="1780" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-50" value="grpc" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="Wx69Amhbbnl48co7pUgd-49" vertex="1" connectable="0">
          <mxGeometry x="-0.0378" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-51" value="콘텐츠 서버 db에 저장" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="248" y="1600" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-53" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="417" y="1600" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-54" value="1. 이미지 2개와 글을 적어서 등록하는 상황&lt;br&gt;&amp;nbsp; &amp;nbsp;-&amp;nbsp;&#39;미디어 서버&#39;가 고장남&lt;br&gt;&amp;nbsp; &amp;nbsp;- &#39;콘텐츠 서버&#39;는 잘 동작한다.&lt;br&gt;&lt;br&gt;2. 미디어 서버에서는 처리가 필요함&lt;br&gt;&amp;nbsp; - file에 대한 정확한 오류알림 &lt;br&gt;&amp;nbsp; - fallback 처리&lt;br&gt;&amp;nbsp; - 아무것도 하지 않으면 콘텐츠를 정상적으로 등록해버리게 된다. &lt;br&gt;(사진 없는데 등록이 되어버림: 정합성 보장 x)" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="-773" y="1507.5" width="260" height="280" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-55" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-38" y="2180" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Wx69Amhbbnl48co7pUgd-57" target="Wx69Amhbbnl48co7pUgd-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-57" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-38" y="2210" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-58" value="저장 버튼 클릭시 &lt;br&gt;파일 저장 api를 호출&lt;br&gt;화면에는 로딩바 표시" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="-773" y="1412.5" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-59" value="동기화 파일 table" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-583" y="1837.5" width="170" height="180" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-60" value="file_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-59" vertex="1">
          <mxGeometry y="30" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-61" value="member_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-59" vertex="1">
          <mxGeometry y="60" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-62" value="path" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-59" vertex="1">
          <mxGeometry y="90" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-18" value="content-type" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-59" vertex="1">
          <mxGeometry y="120" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-19" value="is_compressed (true, false)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="Wx69Amhbbnl48co7pUgd-59" vertex="1">
          <mxGeometry y="150" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Wx69Amhbbnl48co7pUgd-65" target="Wx69Amhbbnl48co7pUgd-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-65" value="콘텐츠 서버 &lt;br&gt;파일 db에 저장&lt;br&gt;&lt;br&gt;카프카 컨슈머: 외부" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="368" y="1685" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-66" value="미디어 서버" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-102" y="1870" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-67" value="우리가 고려한 사항&lt;br&gt;&lt;br&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;1. 저장 순서&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp;- 콘텐츠 서버의 db가 가지게될 file_id가 이미 미디어 서버에 저장된 file_id인지 검증이 필요 , 이것은 미디어에 먼저 file이 저장되어 file_id가 있어야 한다는 의미이므로 저장 순서가 중요함&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;2. 장애 전파&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp;- 파일 저장이 안되었을때는 (미디어 서버에 장애가 발생했을때) 오류를 발생시키고 콘텐츠를 저장하지 못하게 한다.&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;3. 돈아끼는법&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp;- 추후 압축 서버를 설계해서 비용을 절감하고 성능을 개선한다.&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;4. 아웃박스 패턴에 대한 고려&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;(spring, kafka 서버 고장시 재해복구 시나리오)&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="700" y="1510" width="230" height="280" as="geometry" />
        </mxCell>
        <mxCell id="Wx69Amhbbnl48co7pUgd-68" value="파일 압축 라이브러리 사용&lt;br&gt;전용 서버&lt;br&gt;&lt;br&gt;chatgpt api 적용&lt;br&gt;&lt;br&gt;- 파일 압축 (돈 아끼고 이득보자)&lt;br&gt;- 편집&lt;br&gt;- 썸네일 제작" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="700" y="1820" width="200" height="232" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-20" value="동기화 회원 table" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-583" y="2037.5" width="170" height="150" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-22" value="member_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="mzORLCVznDUJBH9im8Ds-20" vertex="1">
          <mxGeometry y="30" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-29" value="name" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="mzORLCVznDUJBH9im8Ds-20" vertex="1">
          <mxGeometry y="60" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-30" value="email" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="mzORLCVznDUJBH9im8Ds-20" vertex="1">
          <mxGeometry y="90" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-31" value="nickname" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="mzORLCVznDUJBH9im8Ds-20" vertex="1">
          <mxGeometry y="120" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-34" value="&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&amp;nbsp; &quot;fileId&quot;: &quot;abc123&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &quot;status&quot;: &quot;SUCCESS&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &quot;errorMessage&quot;: null,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &quot;metadata&quot;: {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &quot;size&quot;: 102400,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &quot;mimeType&quot;: &quot;image/jpeg&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &quot;width&quot;: 100,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &quot;height&quot;: 100,&lt;/div&gt;&lt;div&gt;&amp;nbsp; }&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="720" y="2120" width="170" height="180" as="geometry" />
        </mxCell>
        <mxCell id="mzORLCVznDUJBH9im8Ds-36" value="해야할일&lt;br&gt;&lt;br&gt;1. kafka 메시지 정의하기 (예시 확인)&lt;br&gt;&lt;br&gt;2. 예외처리 확실하게 정하기&lt;br&gt;&lt;br&gt;3. kafka topic명 파티션, 그룹, key 정하기&lt;br&gt;&lt;br&gt;4. 비동기 처리를 어떻게 할것인가&lt;br&gt;- 코틀린 사용 (코루틴)&lt;br&gt;- 가상 스레드 사용 (자바21) : 굉장히 우세함&lt;br&gt;&lt;br&gt;5. 테스트 작성 방식&lt;br&gt;- s3 mock 사용&lt;br&gt;- 단위 테스트 or 통합 테스트 고려하기" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-337.5" y="2170" width="233" height="230" as="geometry" />
        </mxCell>
        <mxCell id="Jwey1jkozNtah0jZmmYM-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Jwey1jkozNtah0jZmmYM-1" target="Jwey1jkozNtah0jZmmYM-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jwey1jkozNtah0jZmmYM-1" value="내부 이벤트 1&lt;br&gt;미디어 서버의 outbox 테이블에 내부 이벤트 발행여부 저장" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="263" y="1950" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jwey1jkozNtah0jZmmYM-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=40;entryDy=50;entryPerimeter=0;" edge="1" parent="1" source="Jwey1jkozNtah0jZmmYM-3" target="Wx69Amhbbnl48co7pUgd-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Ppe5yri1WVaTgqaYrjmu-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Jwey1jkozNtah0jZmmYM-3" target="Wx69Amhbbnl48co7pUgd-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jwey1jkozNtah0jZmmYM-3" value="내부 이벤트 2" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="414" y="1950" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Ppe5yri1WVaTgqaYrjmu-1" value="미디어 서버: 아웃박스 테이블" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-583" y="2210" width="173" height="120" as="geometry" />
        </mxCell>
        <mxCell id="Ppe5yri1WVaTgqaYrjmu-2" value="outbox_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ppe5yri1WVaTgqaYrjmu-1">
          <mxGeometry y="30" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ppe5yri1WVaTgqaYrjmu-3" value="event_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ppe5yri1WVaTgqaYrjmu-1">
          <mxGeometry y="60" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ppe5yri1WVaTgqaYrjmu-12" value="payload" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ppe5yri1WVaTgqaYrjmu-1">
          <mxGeometry y="90" width="173" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ppe5yri1WVaTgqaYrjmu-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.646;entryY=0.973;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="Ppe5yri1WVaTgqaYrjmu-13" target="Wx69Amhbbnl48co7pUgd-24">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="590" y="1880" />
              <mxPoint x="440" y="1880" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Ppe5yri1WVaTgqaYrjmu-13" value="카프카 컨슈머&lt;br&gt;내부" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;fillColor=#f8cecc;strokeColor=#b85450;size=0;" vertex="1" parent="1">
          <mxGeometry x="550" y="1960" width="80" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="URlC0ws2eNy0IJSNLkdQ" name="아웃박스 패턴">
    <mxGraphModel dx="1118" dy="683" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="R81a7MzbhxO435VXoxiR-1" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="90" width="2150" height="1070" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-2" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="130" y="140" width="850" height="970" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-3" value="" style="points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];rounded=1;dashed=1;dashPattern=5 2 1 2;labelPosition=center;verticalLabelPosition=middle;align=center;verticalAlign=middle;fontSize=8;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="510" y="860" width="430" height="220" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-4" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1250" y="430" width="900" height="410" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-5" value="" style="points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];rounded=1;dashed=1;dashPattern=5 2 1 2;labelPosition=center;verticalLabelPosition=middle;align=center;verticalAlign=middle;fontSize=8;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="630" y="620" width="310" height="205" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-6" value="" style="points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];rounded=1;dashed=1;dashPattern=5 2 1 2;labelPosition=center;verticalLabelPosition=middle;align=center;verticalAlign=middle;fontSize=8;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="340" y="170" width="600" height="400" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-7" value="2. 서비스 로직&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="230" width="330" height="160" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-9" target="R81a7MzbhxO435VXoxiR-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-9" value="1. 회원가입" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;size=10;" vertex="1" parent="1">
          <mxGeometry x="170" y="270" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-11" target="R81a7MzbhxO435VXoxiR-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-11" value="Client" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="70" y="280" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-13" target="R81a7MzbhxO435VXoxiR-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-13" value="주관심사&lt;br&gt;&lt;br&gt;회원가입" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;size=10;" vertex="1" parent="1">
          <mxGeometry x="390" y="270" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-15" target="R81a7MzbhxO435VXoxiR-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-15" value="3. 스프링 이벤트 리스너&lt;br&gt;(Before Commit)&lt;br&gt;&lt;br&gt;서비스 트랜잭션의 일부 만약 여기서 실패하면 서비스 로직도 롤백됨&lt;br&gt;&lt;br&gt;DB -&amp;gt; Outbox 테이블에 이벤트 발행 내역을 기록하는 서비스 호출" style="html=1;outlineConnect=0;whiteSpace=wrap;fillColor=#d5e8d4;shape=mxgraph.archimate3.application;appType=event;archiType=rounded;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="740" y="235.5" width="180" height="149" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-17" target="R81a7MzbhxO435VXoxiR-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-17" value="비관심사 (Event)&lt;br&gt;&lt;br&gt;회원 데이터 동기화 이벤트 발행" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;size=10;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="540" y="270" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-18" value="&lt;b&gt;트랜잭션 1&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="360" y="190" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-19" value="&lt;b&gt;트랜잭션 2&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="640" y="633" width="98" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-20" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,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;imageBorder=default;" vertex="1" parent="1">
          <mxGeometry x="1050" y="687" width="135" height="80" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-22" target="R81a7MzbhxO435VXoxiR-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-22" value="4. 스프링 이벤트 리스너&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;(After Commit)&lt;br&gt;&lt;br&gt;이전 트랜잭션이 commit되어 끝나면 새로운 트랜잭션을 만들고 동작시킨다. 즉, 위의 트랜잭션과는 별개&lt;br&gt;&lt;br&gt;Kafka or MQ로 가입한 회원의 ID값을 메시지 발행한다. &lt;br&gt;(ZeroPayload: PK값을 의미)" style="html=1;outlineConnect=0;whiteSpace=wrap;fillColor=#d5e8d4;shape=mxgraph.archimate3.application;appType=event;archiType=rounded;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="740" y="648" width="180" height="158" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-23" value="&lt;font style=&quot;font-size: 17px;&quot;&gt;&lt;b&gt;Member 서버&lt;/b&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="150" y="150" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-26" target="R81a7MzbhxO435VXoxiR-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-26" target="R81a7MzbhxO435VXoxiR-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-26" value="5. 콘텐츠 서버 카프카 리스너&lt;br&gt;(Consumer)&lt;br&gt;&lt;br&gt;Kafka 메시지에서 ID값(Payload)을 꺼낸다.&lt;br&gt;ZeroPayload (ID만 전달받는다.)" style="html=1;outlineConnect=0;whiteSpace=wrap;fillColor=#f8cecc;shape=mxgraph.archimate3.application;appType=event;archiType=rounded;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="1300" y="657" width="230" height="140" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-27" value="&lt;font style=&quot;font-size: 17px;&quot;&gt;&lt;b&gt;Content 서버&lt;/b&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1280" y="450" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-28" value="ZeroPayload 사용 이유&lt;br&gt;&lt;br&gt;1. 최종적 일관성 (Eventual Consistency)&lt;br&gt;2. 가장 최신 데이터를 요청해서 받기&lt;br&gt;3. 서버나 API에 최소한의 부하만 전달" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#333333;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1160" y="870" width="230" height="110" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-29" value="Outbox 테이블에 저장하고 commit" style="shape=datastore;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="785" y="430" width="90" height="105" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-34" target="R81a7MzbhxO435VXoxiR-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-31" value="&lt;b&gt;트랜잭션 3&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="532" y="870" width="98" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-32" value="Outbox 테이블에 카프카 메시지 발행여부 기록하고 commit" style="shape=datastore;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="920.25" width="90" height="121.5" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-34" target="R81a7MzbhxO435VXoxiR-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-34" value="5. 멤버 서버 내부 카프카 리스너&lt;br&gt;(Internal Consumer)&lt;br&gt;&lt;br&gt;카프카가 제대로 메시지를 발행했는지 여부를 RDB Outbox 테이블에 기록한다." style="html=1;outlineConnect=0;whiteSpace=wrap;fillColor=#f8cecc;shape=mxgraph.archimate3.application;appType=event;archiType=rounded;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="675" y="911" width="230" height="140" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-36" target="R81a7MzbhxO435VXoxiR-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-36" value="6. gRPC or Feign Client 호출&lt;br&gt;&lt;br&gt;Member 서버에 Payload인 ID값을 던져서 가장 최신의 유저 정보를 받아온다." style="html=1;outlineConnect=0;whiteSpace=wrap;fillColor=#ffe6cc;shape=mxgraph.archimate3.application;appType=event;archiType=rounded;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1590" y="658" width="230" height="140" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-37" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1.001;exitY=0.439;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="R81a7MzbhxO435VXoxiR-2" target="R81a7MzbhxO435VXoxiR-36">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1460" y="540" as="sourcePoint" />
            <mxPoint x="1510" y="490" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1340" y="566" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-38" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;6. gRPC로 member 데이터 받아오기&lt;/font&gt;&lt;/b&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="R81a7MzbhxO435VXoxiR-37">
          <mxGeometry x="-0.0868" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-39" value="7. 받아온 유저 정보 테이블에 저장&lt;br&gt;&lt;br&gt;(이벤트 발행 기준 가장 최신의 데이터가 저장될 것이다.)" style="html=1;outlineConnect=0;whiteSpace=wrap;shape=mxgraph.archimate3.application;appType=event;archiType=rounded;" vertex="1" parent="1">
          <mxGeometry x="1880" y="658" width="230" height="140" as="geometry" />
        </mxCell>
        <mxCell id="R81a7MzbhxO435VXoxiR-40" value="&lt;font style=&quot;font-size: 21px;&quot;&gt;데이터 동기화 과정&lt;/font&gt;" style="text;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="10" width="200" height="70" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
